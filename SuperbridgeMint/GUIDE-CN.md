# è·¨é“¾ä»£å¸æ¡¥æ¥ä½œä¸šæŒ‡å— (ä¸­æ–‡ç‰ˆ)

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨å®Œæˆä» Ethereum Sepolia (L1) åˆ° Optimism Sepolia (L2) çš„ä»£å¸è·¨é“¾æ¡¥æ¥ä½œä¸šã€‚

## ğŸ“‹ ä½œä¸šè¦æ±‚

1. âœ… åœ¨ Sepolia ä¸Šéƒ¨ç½²è‡ªå·±çš„ L1 Token
2. âœ… ä½¿ç”¨ OptimismMintableERC20Factory åœ¨ L2 ä¸Šåˆ›å»ºå¯¹åº”çš„ Token
3. âœ… L1 Token æˆæƒç»™ L1StandardBridge
4. âœ… è°ƒç”¨ L1StandardBridge çš„ bridgeERC20

## ğŸ› ï¸ å‡†å¤‡å·¥ä½œ

åœ¨å¼€å§‹ä¹‹å‰,æ‚¨éœ€è¦:
- [ ] Sepolia æµ‹è¯•ç½‘ ETH (ä» https://sepoliafaucet.com è·å–)
- [ ] OP Sepolia æµ‹è¯•ç½‘ ETH (ä» https://www.alchemy.com/faucets/optimism-sepolia è·å–)
- [ ] åˆ›å»º `.env` æ–‡ä»¶å¹¶æ·»åŠ æ‚¨çš„ç§é’¥
- [ ] è¿è¡Œ `npm install` å®‰è£…ä¾èµ–

## å®‰è£…æ­¥éª¤

```bash
# 1. å®‰è£…ä¾èµ–
npm install

# 2. åˆ›å»ºç¯å¢ƒé…ç½®æ–‡ä»¶
cp .env.example .env

# 3. ç¼–è¾‘ .env æ–‡ä»¶,æ·»åŠ æ‚¨çš„ç§é’¥
# PRIVATE_KEY=your_private_key_here
```

---

## æ­¥éª¤ 1: éƒ¨ç½² L1 Token

**å‘½ä»¤:**
```bash
npx hardhat run scripts/1-deployL1Token.js --network sepolia
```

**è¿™ä¸€æ­¥åšä»€ä¹ˆ:**
- åœ¨ Sepolia æµ‹è¯•ç½‘ä¸Šéƒ¨ç½²ä¸€ä¸ª ERC20 ä»£å¸åˆçº¦
- ç»™æ‚¨çš„åœ°å€é“¸é€  1,000,000 ä¸ª MTK ä»£å¸
- åœ¨ Etherscan ä¸ŠéªŒè¯åˆçº¦(å¯é€‰)

**æ“ä½œè¯´æ˜:**
æ¯ä¸ªä»£å¸éƒ½æœ‰åç§°ã€ç¬¦å·å’Œæ€»ä¾›åº”é‡ã€‚æˆ‘ä»¬çš„ä»£å¸å« MyToken (MTK),åˆå§‹ä¾›åº”é‡æ˜¯ 100 ä¸‡ä¸ªã€‚

**æœŸæœ›è¾“å‡º:**
```
âœ… MyToken deployed to: 0x...
ğŸ”— Etherscan: https://sepolia.etherscan.io/address/0x...
```

**é‡è¦æ“ä½œ:**
1. å¤åˆ¶éƒ¨ç½²çš„åˆçº¦åœ°å€
2. æ·»åŠ åˆ° `.env` æ–‡ä»¶:
   ```
   L1_TOKEN_ADDRESS=0xæ‚¨çš„ä»£å¸åœ°å€
   ```

**åŸç†è§£é‡Š:**
è¿™ä¸€æ­¥æˆ‘ä»¬åœ¨ä»¥å¤ªåŠ L1 ä¸Šåˆ›å»ºäº†ä¸€ä¸ªæ ‡å‡†çš„ ERC20 ä»£å¸ã€‚è¿™ä¸ªä»£å¸æ˜¯è·¨é“¾çš„æºå¤´,åç»­æˆ‘ä»¬ä¼šæŠŠå®ƒæ¡¥æ¥åˆ° Optimism L2ã€‚

---

## æ­¥éª¤ 2: åœ¨ L2 åˆ›å»ºå¯¹åº”çš„ Token

**å‘½ä»¤:**
```bash
npx hardhat run scripts/2-createL2Token.js --network optimismSepolia
```

**è¿™ä¸€æ­¥åšä»€ä¹ˆ:**
- è¿æ¥åˆ° L2 ä¸Šçš„ OptimismMintableERC20Factory åˆçº¦
- è°ƒç”¨å·¥å‚åˆçº¦åˆ›å»ºä¸€ä¸ªå¯æ¡¥æ¥çš„ ERC20 ä»£å¸
- è¿™ä¸ª L2 ä»£å¸ä¼šè‡ªåŠ¨é…ç½®ä¸ºå¯ä»¥è¢«æ¡¥æ¥åˆçº¦é“¸é€ /é”€æ¯

**æœŸæœ›è¾“å‡º:**
```
âœ… L2 Token Created Successfully!
ğŸ“ L2 Token Address: 0x...
ğŸ”— Token Explorer: https://sepolia-optimism.etherscan.io/address/0x...
```

**é‡è¦æ“ä½œ:**
1. å¤åˆ¶ L2 ä»£å¸åœ°å€
2. æ·»åŠ åˆ° `.env` æ–‡ä»¶:
   ```
   L2_TOKEN_ADDRESS=0xæ‚¨çš„L2ä»£å¸åœ°å€
   ```

**åŸç†è§£é‡Š:**
ä¸ºä»€ä¹ˆéœ€è¦åœ¨ L2 åˆ›å»ºä»£å¸?å› ä¸ºè·¨é“¾æ¡¥çš„å·¥ä½œåŸç†æ˜¯:
- L1 ä¸Šé”å®šæ‚¨çš„ä»£å¸
- L2 ä¸Šé“¸é€ ç­‰é‡çš„ä»£å¸

OptimismMintableERC20Factory åˆ›å»ºçš„ä»£å¸å®ç°äº†ç‰¹æ®Šæ¥å£,å…è®¸ L2 æ¡¥æ¥åˆçº¦é“¸é€ å’Œé”€æ¯ä»£å¸,è¿™æ˜¯æ ‡å‡†è·¨é“¾æ¡¥æœºåˆ¶çš„è¦æ±‚ã€‚

---

## æ­¥éª¤ 3 & 4: æ¡¥æ¥ä»£å¸åˆ° L2

**å‘½ä»¤:**
```bash
npx hardhat run scripts/3-bridgeTokens.js --network sepolia
```

**è¿™ä¸€æ­¥åšä»€ä¹ˆ:**
1. **æ­¥éª¤ 3:** æˆæƒ L1StandardBridge åˆçº¦å¯ä»¥èŠ±è´¹æ‚¨çš„ 100 ä¸ª MTK
2. **æ­¥éª¤ 4:** è°ƒç”¨ `bridgeERC20` å‡½æ•°å¯åŠ¨è·¨é“¾è½¬è´¦
3. æ‚¨çš„ä»£å¸åœ¨ L1 è¢«é”å®š
4. å‘é€æ¶ˆæ¯åˆ° L2 é“¸é€ ä»£å¸

**æœŸæœ›è¾“å‡º:**
```
==========================================================
âœ… BRIDGE TRANSACTION SUCCESSFUL!
==========================================================

ğŸ“‹ L1 Transaction (Sepolia):
   Hash: 0x...
   ğŸ”— Explorer: https://sepolia.etherscan.io/tx/0x...

â³ Waiting for L2 transaction...
   The L2 transaction will appear in 1-3 minutes
   ğŸ”— https://sepolia-optimism.etherscan.io/address/æ‚¨çš„åœ°å€
```

**é‡è¦æ“ä½œ:**
1. **ä¿å­˜ L1 äº¤æ˜“é“¾æ¥** - è¿™æ˜¯ä½œä¸šè¦æ±‚çš„ç¬¬ä¸€ä¸ªé“¾æ¥
2. ç­‰å¾… 1-3 åˆ†é’Ÿ
3. åœ¨ OP Sepolia æµè§ˆå™¨æŸ¥æ‰¾ L2 äº¤æ˜“
4. **ä¿å­˜ L2 äº¤æ˜“é“¾æ¥** - è¿™æ˜¯ä½œä¸šè¦æ±‚çš„ç¬¬äºŒä¸ªé“¾æ¥

---

## å¦‚ä½•æ‰¾åˆ° L2 äº¤æ˜“

ç­‰å¾… 1-3 åˆ†é’Ÿå,æŒ‰ä»¥ä¸‹æ­¥éª¤æŸ¥æ‰¾ L2 äº¤æ˜“:

### æ–¹æ³• 1: é€šè¿‡åœ°å€æŸ¥è¯¢

1. è®¿é—® OP Sepolia æµè§ˆå™¨:
   ```
   https://sepolia-optimism.etherscan.io/address/æ‚¨çš„é’±åŒ…åœ°å€#tokentxns
   ```

2. ç‚¹å‡» "Token Transfers (ERC-20)" æ ‡ç­¾

3. æŸ¥æ‰¾æ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„äº¤æ˜“:
   - **Token:** MTK
   - **Amount:** 100 MTK
   - **From:** L2StandardBridge (0x4200...0010)
   - **To:** æ‚¨çš„åœ°å€

4. ç‚¹å‡»äº¤æ˜“å“ˆå¸Œè·å–å®Œæ•´é“¾æ¥

### æ–¹æ³• 2: æ£€æŸ¥ä»£å¸ä½™é¢

1. æŸ¥çœ‹ L2 ä¸Šçš„ MTK ä»£å¸ä½™é¢
2. åº”è¯¥æ˜¾ç¤º 100 MTK
3. ç‚¹å‡»ä»£å¸äº¤æ˜“è®°å½•æŸ¥çœ‹è½¬è´¦è¯¦æƒ…

---

## ä½œä¸šæäº¤

æ‚¨éœ€è¦æäº¤ä¸¤ä¸ªé“¾æ¥:

### 1. L1 äº¤æ˜“é“¾æ¥ (ç¬¬ 4 æ­¥çš„ bridgeERC20 è°ƒç”¨)
```
https://sepolia.etherscan.io/tx/0x[æ‚¨çš„äº¤æ˜“å“ˆå¸Œ]
```
è¿™ä¸ªé“¾æ¥æ˜¾ç¤ºåœ¨ Sepolia ä¸Šè°ƒç”¨ `bridgeERC20` çš„äº¤æ˜“

### 2. L2 äº¤æ˜“é“¾æ¥ (å¯¹åº”çš„ L2 é“¸é€ äº¤æ˜“)
```
https://sepolia-optimism.etherscan.io/tx/0x[L2äº¤æ˜“å“ˆå¸Œ]
```
è¿™ä¸ªé“¾æ¥æ˜¾ç¤ºåœ¨ Optimism Sepolia ä¸Šé“¸é€ ä»£å¸çš„äº¤æ˜“

---

## å¸¸è§é—®é¢˜è§£ç­”

### â“ ä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ªæµ‹è¯•ç½‘çš„ ETH?

- **Sepolia ETH:** ç”¨äºæ”¯ä»˜ L1 ä¸Šçš„ gas è´¹ç”¨(éƒ¨ç½²åˆçº¦ã€æˆæƒã€æ¡¥æ¥)
- **OP Sepolia ETH:** ç”¨äºæ”¯ä»˜ L2 ä¸Šçš„ gas è´¹ç”¨(åˆ›å»º L2 ä»£å¸)

### â“ L2 äº¤æ˜“ä¸ºä»€ä¹ˆéœ€è¦ç­‰å¾… 1-3 åˆ†é’Ÿ?

è·¨é“¾æ¶ˆæ¯éœ€è¦é€šè¿‡ CrossDomainMessenger ä¼ é€’:
1. L1 äº¤æ˜“ç¡®è®¤å,æ¶ˆæ¯è¢«å‘é€åˆ° L2
2. L2 çš„ Sequencer æ¥æ”¶å¹¶å¤„ç†æ¶ˆæ¯
3. L2StandardBridge é“¸é€ ä»£å¸åˆ°æ‚¨çš„åœ°å€

è¿™ä¸ªè¿‡ç¨‹é€šå¸¸éœ€è¦ 1-3 åˆ†é’Ÿã€‚

### â“ ä¸ºä»€ä¹ˆè¦ç”¨å·¥å‚åˆçº¦åˆ›å»º L2 ä»£å¸?

æ ‡å‡†æ¡¥æ¥è¦æ±‚ L2 ä»£å¸å®ç° `IOptimismMintableERC20` æ¥å£ã€‚å·¥å‚åˆçº¦ç¡®ä¿:
- ä»£å¸æ ¼å¼æ­£ç¡®
- æ¡¥æ¥åˆçº¦æœ‰æƒé™é“¸é€ /é”€æ¯ä»£å¸
- ä»£å¸ä¸ L1 ä»£å¸æ­£ç¡®å…³è”

### â“ approve å‡½æ•°çš„ä½œç”¨æ˜¯ä»€ä¹ˆ?

`approve` æ˜¯ ERC20 æ ‡å‡†å‡½æ•°,ç”¨äºæˆæƒå…¶ä»–åˆçº¦ä½¿ç”¨æ‚¨çš„ä»£å¸ã€‚æ¡¥æ¥åˆçº¦éœ€è¦æ‚¨çš„æˆæƒæ‰èƒ½å°†ä»£å¸ä»æ‚¨çš„é’±åŒ…è½¬ç§»åˆ°æ¡¥æ¥åˆçº¦ã€‚

### â“ å¦‚æœæƒ³æŠŠä»£å¸ä» L2 è½¬å› L1 æ€ä¹ˆåŠ?

åå‘æ¡¥æ¥è¿‡ç¨‹ç±»ä¼¼,ä½†éœ€è¦ç­‰å¾…çº¦ 7 å¤©:
1. åœ¨ L2 ä¸Šè°ƒç”¨ L2StandardBridge çš„ bridgeERC20
2. ç­‰å¾… 7 å¤©æŒ‘æˆ˜æœŸ(fraud-proof æœºåˆ¶è¦æ±‚)
3. åœ¨ L1 ä¸Šé¢†å–ä»£å¸

ä¸ºä»€ä¹ˆ L2â†’L1 éœ€è¦ 7 å¤©?è¿™æ˜¯ Optimistic Rollup çš„å®‰å…¨æœºåˆ¶,ç»™éªŒè¯è€…æ—¶é—´æ¥æŒ‘æˆ˜å¯èƒ½çš„æ¬ºè¯ˆäº¤æ˜“ã€‚

---

## æ•…éšœæ’é™¤

### "Insufficient funds" é”™è¯¯
- æ£€æŸ¥ Sepolia ETH ä½™é¢:éœ€è¦çº¦ 0.01-0.02 ETH
- L2 æ“ä½œéœ€è¦ OP Sepolia ETH

### "L1_TOKEN_ADDRESS not set" é”™è¯¯
- ç¡®ä¿åœ¨ `.env` æ–‡ä»¶ä¸­æ·»åŠ äº†åœ°å€
- æ ¼å¼:`L1_TOKEN_ADDRESS=0x...` (ä¸éœ€è¦å¼•å·)

### L2 äº¤æ˜“ä¸€ç›´ä¸å‡ºç°
- è€å¿ƒç­‰å¾…!å¯èƒ½éœ€è¦ 3 åˆ†é’Ÿ
- æ£€æŸ¥ Token Transfers æ ‡ç­¾,ä¸æ˜¯æ™®é€šäº¤æ˜“
- ç¡®è®¤ L1 äº¤æ˜“å·²æˆåŠŸç¡®è®¤

### åˆçº¦éªŒè¯å¤±è´¥
- è¿™æ˜¯å¯é€‰çš„,ä¸å½±å“åŠŸèƒ½
- å³ä½¿ä¸éªŒè¯,åˆçº¦ä¹Ÿæ­£å¸¸å·¥ä½œ
- å¯ä»¥ç¨ååœ¨ Etherscan ä¸Šæ‰‹åŠ¨éªŒè¯

---

## æŠ€æœ¯åŸç†è¯´æ˜

### è·¨é“¾æ¡¥çš„å·¥ä½œåŸç†

```
L1 (Sepolia)                        L2 (OP Sepolia)
    |                                      |
    | 1. Lock tokens                      |
    |    in L1StandardBridge              |
    |                                      |
    | 2. Send message -----------------> |
    |    via CrossDomainMessenger         |
    |                                      |
    |                              3. Receive message
    |                              4. Mint tokens
    |                                 in L2StandardBridge
```

### å…³é”®åˆçº¦åœ°å€

| åˆçº¦ | ç½‘ç»œ | åœ°å€ |
|------|------|------|
| L1StandardBridge | Sepolia | 0xFBb0621E0B23b5478B630BD55a5f21f67730B0F1 |
| OptimismMintableERC20Factory | OP Sepolia | 0x4200000000000000000000000000000000000012 |
| L2StandardBridge | OP Sepolia | 0x4200000000000000000000000000000000000010 |

### å®‰å…¨æ€§

- âœ… å»ä¸­å¿ƒåŒ–:é€šè¿‡æ¬ºè¯ˆè¯æ˜ä¿è¯å®‰å…¨
- âœ… æ— éœ€ä¿¡ä»»:ä»»ä½•äººéƒ½å¯ä»¥éªŒè¯
- âœ… é€æ˜:æ‰€æœ‰äº¤æ˜“å…¬å¼€å¯æŸ¥

---

## é¡¹ç›®æ–‡ä»¶ç»“æ„

```
SuperbridgeMint/
â”œâ”€â”€ contracts/
â”‚   â””â”€â”€ MyToken.sol              # ERC20 ä»£å¸åˆçº¦
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ 1-deployL1Token.js       # éƒ¨ç½² L1 ä»£å¸
â”‚   â”œâ”€â”€ 2-createL2Token.js       # åˆ›å»º L2 ä»£å¸
â”‚   â””â”€â”€ 3-bridgeTokens.js        # æˆæƒå¹¶æ¡¥æ¥ä»£å¸
â”œâ”€â”€ hardhat.config.js            # ç½‘ç»œé…ç½®
â”œâ”€â”€ .env                         # ç¯å¢ƒå˜é‡(ä¸è¦æäº¤!)
â”œâ”€â”€ README.md                    # è‹±æ–‡æ–‡æ¡£
â””â”€â”€ GUIDE-CN.md                  # ä¸­æ–‡æŒ‡å—(æœ¬æ–‡ä»¶)
```

## é¢å¤–èµ„æº

- [Optimism æ¡¥æ¥æ–‡æ¡£](https://docs.optimism.io/builders/app-developers/bridging/standard-bridge)
- [Optimism åˆçº¦åœ°å€](https://docs.optimism.io/chain/addresses)
- [OP Sepolia æµè§ˆå™¨](https://sepolia-optimism.etherscan.io)
- [Sepolia æµè§ˆå™¨](https://sepolia.etherscan.io)

---

ç¥æ‚¨ä½œä¸šé¡ºåˆ©! å¦‚æœ‰é—®é¢˜,è¯·ä»”ç»†é˜…è¯»é”™è¯¯ä¿¡æ¯å’Œæœ¬æŒ‡å—çš„æ•…éšœæ’é™¤éƒ¨åˆ†ã€‚ğŸš€
