# ğŸ¯ EIP-7702 TokenBank ä½œä¸šé¡¹ç›®

> ä½¿ç”¨ MetaMask å®˜æ–¹ EIP-7702 Delegator å®ç°ä¸€é”®æˆæƒå¹¶å­˜æ¬¾

---

## ï¿½ ä½œä¸šè¦æ±‚

1. âœ… ä½¿ç”¨ MetaMask å®˜æ–¹ EIP-7702 Delegator åˆçº¦ (`0x63c0c19a282a1B52b07dD5a65b58948A07DAE32B`)
2. âœ… ä¿®æ”¹ TokenBank å‰ç«¯ï¼Œå®ç° EOA æˆæƒå¹¶åœ¨ä¸€ä¸ªäº¤æ˜“ä¸­å®Œæˆæˆæƒå’Œå­˜æ¬¾
3. â³ æäº¤ GitHub ä»£ç å’Œæµ‹è¯•ç½‘äº¤æ˜“é“¾æ¥

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®å‡†å¤‡
- âœ… Node.js 18+
- âœ… Foundry (Solidity å¼€å‘å·¥å…·)
- âœ… MetaMask æˆ–å…¶ä»– Web3 é’±åŒ…
- âœ… Sepolia æµ‹è¯•ç½‘ ETH

### å¯åŠ¨é¡¹ç›®

```bash
# 1. å®‰è£…ä¾èµ–
cd frontend
npm install

# 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# 3. è®¿é—® http://localhost:3000
```

---

## ğŸ“š æ–‡æ¡£å¯¼èˆª

æœ¬é¡¹ç›®åŒ…å«ä»¥ä¸‹æ–‡æ¡£ï¼Œå¸®åŠ©ä½ ç†è§£å’Œå®Œæˆä½œä¸šï¼š

### ğŸ“– [README.md](./README.md) 
**ä½ æ­£åœ¨çœ‹è¿™ä¸ªï¼** é¡¹ç›®æ€»è§ˆå’Œå¿«é€Ÿå¼€å§‹æŒ‡å—

### ğŸ¯ [ä½œä¸šå®ŒæˆæŒ‡å—.md](./ä½œä¸šå®ŒæˆæŒ‡å—.md) â­ é‡ç‚¹ï¼
**ä»è¿™é‡Œå¼€å§‹å®Œæˆä½œä¸š**
- è¯¦ç»†çš„æ“ä½œæ­¥éª¤
- å¦‚ä½•å‡†å¤‡ç§é’¥
- å¦‚ä½•æµ‹è¯• EIP-7702 åŠŸèƒ½
- å¦‚ä½•æäº¤ä½œä¸š

### ğŸ“š [æŠ€æœ¯è¯´æ˜.md](./æŠ€æœ¯è¯´æ˜.md)
**æ·±å…¥ç†è§£å®ç°åŸç†**
- EIP-7702 æ ¸å¿ƒæ¦‚å¿µ
- ä»£ç å®ç°è§£æ
- ä¸ä¼ ç»Ÿæ–¹å¼çš„å¯¹æ¯”
- å®‰å…¨æ€§è€ƒè™‘

### âœ… [task.md](./task.md)
**ä»»åŠ¡è¿›åº¦æ¸…å•**
- å·²å®Œæˆçš„ä»»åŠ¡
- å¾…å®Œæˆçš„ä»»åŠ¡

---

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
tokenbank-eip7702-delegate/
â”œâ”€â”€ frontend/                      # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â””â”€â”€ page.tsx              # â­ EIP-7702 ä¸»è¦å®ç°
â”‚   â”œâ”€â”€ constants/
â”‚   â”‚   â”œâ”€â”€ addresses.ts          # â­ åˆçº¦åœ°å€é…ç½®
â”‚   â”‚   â””â”€â”€ Delegator.abi.ts      # â­ Delegator ABI
â”‚   â””â”€â”€ lib/
â”‚       â””â”€â”€ wagmi.tsx             # Web3 é…ç½®
â”œâ”€â”€ src/                          # æ™ºèƒ½åˆçº¦
â”‚   â”œâ”€â”€ MyToken.sol
â”‚   â”œâ”€â”€ TokenBank.sol
â”‚   â””â”€â”€ TokenBankPermit2.sol
â””â”€â”€ ä½œä¸šå®ŒæˆæŒ‡å—.md                # â­ ä½œä¸šæŒ‡å¯¼æ–‡æ¡£
```

---

## ğŸ”‘ æ ¸å¿ƒåŠŸèƒ½ï¼šEIP-7702 æˆæƒå¹¶å­˜æ¬¾

### å®ç°åŸç†

1. **ä½¿ç”¨ç§é’¥è´¦æˆ·**ï¼šç»•è¿‡ JSON-RPC çš„é™åˆ¶
2. **ç­¾ç½² EIP-7702 Authorization**ï¼šä¸´æ—¶æˆæƒ EOA ä½¿ç”¨ Delegator ä»£ç 
3. **æ‰¹é‡æ‰§è¡Œ**ï¼šåœ¨ä¸€ä¸ªäº¤æ˜“ä¸­å®Œæˆ `Approve` + `Deposit`

### ä»£ç äº®ç‚¹

```typescript
// 1. åˆ›å»ºç§é’¥è´¦æˆ·
const account = privateKeyToAccount(privateKey);
const client = createWalletClient({ account, chain: sepolia });

// 2. ç­¾ç½²æˆæƒ
const authorization = await signAuthorization(client, {
    contractAddress: DELEGATOR_ADDRESS,
});

// 3. å‘é€äº¤æ˜“ï¼ˆè‡ªè°ƒç”¨ + æ‰¹é‡æ‰§è¡Œï¼‰
const hash = await client.sendTransaction({
    to: account.address,  // è‡ªè°ƒç”¨
    data: executeCallData,
    authorizationList: [authorization],  // â­ EIP-7702 å…³é”®
});
```

---

## ğŸ“ æŠ€æœ¯æ ˆ

- **å‰ç«¯**: Next.js 15 + React 19 + TypeScript
- **Web3**: viem + wagmi + RainbowKit
- **åˆçº¦**: Solidity + Foundry
- **ç½‘ç»œ**: Sepolia æµ‹è¯•ç½‘

---

## ï¿½ å¦‚ä½•å®Œæˆä½œä¸šï¼Ÿ

### 1ï¸âƒ£ é˜…è¯»æ–‡æ¡£
ğŸ‘‰ æ‰“å¼€ [ä½œä¸šå®ŒæˆæŒ‡å—.md](./ä½œä¸šå®ŒæˆæŒ‡å—.md)

### 2ï¸âƒ£ æµ‹è¯•åŠŸèƒ½
- å¯åŠ¨å‰ç«¯ï¼š`npm run dev`
- å‡†å¤‡ç§é’¥ï¼ˆä» MetaMask å¯¼å‡ºï¼‰
- æµ‹è¯• EIP-7702 æˆæƒå¹¶å­˜æ¬¾

### 3ï¸âƒ£ æäº¤ä½œä¸š
- è·å–äº¤æ˜“å“ˆå¸Œ
- æäº¤ GitHub é“¾æ¥
- æäº¤äº¤æ˜“æµè§ˆå™¨é“¾æ¥

---

## â“ å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆéœ€è¦ç§é’¥ï¼Ÿ
**A**: EIP-7702 çš„ `signAuthorization` åŠŸèƒ½ç›®å‰ä¸æ”¯æŒ JSON-RPC è´¦æˆ·ï¼ˆå¦‚ MetaMaskï¼‰ï¼Œå¿…é¡»ä½¿ç”¨ç§é’¥è´¦æˆ·ç›´æ¥ç­¾åã€‚

### Q: å®‰å…¨å—ï¼Ÿ
**A**: ä»…åœ¨æµ‹è¯•ç½‘ä½¿ç”¨ï¼ä¸è¦ä½¿ç”¨æœ‰çœŸå®èµ„é‡‘çš„è´¦æˆ·ç§é’¥ã€‚

### Q: äº¤æ˜“å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
**A**: æ£€æŸ¥ï¼š
- æ˜¯å¦è¿æ¥åˆ° Sepolia æµ‹è¯•ç½‘
- è´¦æˆ·æ˜¯å¦æœ‰è¶³å¤Ÿçš„ ETH å’Œ Token
- ç§é’¥æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼ˆ`0x` å¼€å¤´ï¼Œ66 ä¸ªå­—ç¬¦ï¼‰

---

## ï¿½ ç›¸å…³é“¾æ¥

- **Delegator åˆçº¦**: [`0x63c0c19a282a1B52b07dD5a65b58948A07DAE32B`](https://etherscan.io/address/0x63c0c19a282a1B52b07dD5a65b58948A07DAE32B)
- **EIP-7702 ææ¡ˆ**: https://eips.ethereum.org/EIPS/eip-7702
- **Viem æ–‡æ¡£**: https://viem.sh/docs/experimental/eip7702

---

## ğŸ‰ å¼€å§‹ä½ çš„ä½œä¸š

å‡†å¤‡å¥½äº†å—ï¼Ÿ

1. ğŸ“– é˜…è¯» **[ä½œä¸šå®ŒæˆæŒ‡å—.md](./ä½œä¸šå®ŒæˆæŒ‡å—.md)**
2. ğŸš€ å¯åŠ¨å‰ç«¯å¹¶æµ‹è¯•åŠŸèƒ½
3. ğŸ“¤ æäº¤ä½ çš„ä½œä¸š

ç¥ä½ é¡ºåˆ©å®Œæˆï¼ï¿½
